{% extends 'base.html' %}
{% block content %}
{% load static %}
{% load social_share %}
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css"> 
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.3/jspdf.umd.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.3/html2pdf.bundle.min.js"></script> -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.0/jspdf.umd.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/0.4.1/html2canvas.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/print-this/printThis.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"
  integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8sh+Wyj73RNMIpiD6bq5D2ZAdfPI4mM1iS6L4" crossorigin="anonymous">
  <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
<style>
    
    

    table {
        border-collapse: collapse;
        width: 100%;
    }

    th,
    td {
        border-bottom: 1px solid black;
        padding: 1.92vh; 
        text-align: center;
        font-size: 2.88vh; 
    }

    .details-container {
        background-color: #c4c1c1fd;
        margin-top: 3vh;
        border-radius: 1.6vh;
        padding: 4.8vh; 
    }

    .table-container {
        background-color: rgb(61, 61, 61);
        border-radius: 1.6vh;
        padding: 4.8vh; 
        margin-top: 3.2vh; 
    }

    h2 {
        text-align: center;
        font-size: 3.74vh;
    }

    p {
        font-size: 2.56vh; 
    }
    .left-side{

        border-right: .5vh solid  rgb(61, 61, 61);
    }
    @media print {
        body * {
            visibility: hidden;
            color: black;
        }
    
        .details-container,
        .details-container * {
            visibility: visible;
        }
    
        .details-container {
            display: flex;
            flex-direction: row;
            position: absolute;
            left: 0;
            top: 0;
            width: 100%;
            gap: 20px;
        }
    
        table {
            border-collapse: collapse;
            width: 100%;
        }
    
        th,
        td {
            border-bottom: 1px solid black;
            padding: 12px;
            text-align: center;
            font-size: 18px;
        }
    
        .details-container {
            background-color: #6a6a6afd;
            margin-top: 3%;
            border-radius: 10px;
            padding: 30px;
        }
    
        .table-container {
            background-color: rgb(61, 61, 61);
            border-radius: 10px;
            padding: 30px;
            margin-top: 20px;
        }
    
        h2 {
            text-align: center;
            font-size: 24px;
            color: black;
        }
    
        p {
            font-size: 16px;
        }
    }
    
    
    @media (max-width: 767px) {
        .left-side {
            border-right: 0; 
            border-bottom: .5vh solid ;
            padding-bottom: 2.4vh; 
        }
        
    }
</style>



<body>
    <div class="body-wrapper">
        <div class="container-fluid">
            <nav aria-label="breadcrumb">
                <ol class="breadcrumb text-light">
                    {% if log_details.user_type == 'Company' %} <li class="breadcrumb-item"><a href="{% url 'company_dashboard' %}" class="text-warning">Dashboard</a></li>{% endif %}
                    {% if log_details.user_type == 'Staff' %} <li class="breadcrumb-item"><a href="{% url 'staff_dashboard' %}" class="text-warning">Dashboard</a></li>{% endif %}
                    <li class="breadcrumb-item"><a href="{% url 'manual_journal' %}" class="text-warning">All journal list</a></li>
                    <li class="breadcrumb-item" aria-current="page">Over view</li>
                </ol>
            </nav>
            <div>
                <div class="row p-4 rounded bg-black" style=" border-radius: 5px">
                    
                    <!------------- overview left side -------------------->
                    <div class="left-side col-md-4 p-2 border-right border-warning" >
                        <h4 class="text-light mb-4">All Journal Lists</h4>
                        <div class="  d-flex mb-3 ">
                            <div class="input-group">
                                <input type="text" id="search"  class="form-control text-dark bg-light " placeholder="Search..." autocomplete="off">
                            </div>
                            <div class="input-group-append ms-1">
                                <button class="btn btn-outline-warning" type="button" data-bs-toggle="dropdown">
                                    <i class="fas fa-sort"></i> 
                                </button>
                                <div class="dropdown-menu" aria-labelledby="sortDropdownMenu">
                                    <a class="dropdown-item text-dark" href="?sort=all{% if filter_option != 'all' %}&filter={{ filter_option }}{% endif %}">All</a>
                                    <a class="dropdown-item text-dark" href="?sort=name{% if filter_option != 'all' %}&filter={{ filter_option }}{% endif %}">Name</a>
                                    <a class="dropdown-item text-dark" href="?sort=type{% if filter_option != 'all' %}&filter={{ filter_option }}{% endif %}">Type</a>
                                </div>
                            </div>
                            <div class="input-group-append ms-1">
                                <button class="btn btn-outline-warning" type="button" data-bs-toggle="dropdown">
                                    <i class="fa fa-filter"></i> 
                                </button>
                                <div class="dropdown-menu text-dark">
                                    <a class="dropdown-item text-dark" href="?filter=all{% if sort_option != 'name' %}&sort={{ sort_option }}{% endif %}">All</a>
                                    <a class="dropdown-item text-dark" href="?filter=active{% if sort_option != 'name' %}&sort={{ sort_option }}{% endif %}">Active</a>
                                    <a class="dropdown-item text-dark" href="?filter=inactive{% if sort_option != 'name' %}&sort={{ sort_option }}{% endif %}">Inactive</a>
                                </div>
                            </div>
                            <a class="btn btn-outline-warning  ms-1" href="{% url 'add_journal' %}" role="button"> New </a>
                        </div>
                        <hr>
                        <div class="list-group mt-3"id="journalList">
                            {% for v in journal %}
                            <a href="" class="list-item">
                              <div class="d-flex justify-content-between text-white">
                                <span>{{ v.date }}</span>
                                <span><i class="fa fa-inr"></i>{{ v.total_debit }}</span>
                              </div>
                              <div class="d-flex justify-content-between text-white mt-2">
                                <span>{{ v.journal_no }}</span>
                                {% if v.status == 'draft' %}
                                <span class="status draft" style="color: #F86F03;">{{ v.status }}</span>
                                {% elif v.status == 'save' %}
                                <span class="status save text-success">{{ v.status }}</span>
                                {% else %}
                                <span class="status">{{ v.status }}</span>
                                {% endif %}
                              </div>
                            </a>
                            <br>
                           {% endfor %}
                          </div>
              
                    </div>
                    
                    
                    <!--------- overview right side -------------------->
                    <div class="col-md-8 ml-0  mb-5 " id="overviewdiv">
                        <div class="row">
                          <div class="col-md-7">
                            <a class="text-white" style="font-size: 1.5rem;">
                              
                            </a>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-md-6">
                            <a class="btn" style="background-color: chocolate; margin-right: 2vh;"><i class="fas fa-eye"></i>
                              Overview</a>
                            <a href=" " class=" btn fa fa-file-alt" data-bs-toggle="dropdown" id="attachmentDropdown"
                              aria-haspopup="true" aria-expanded="false"
                              style="background-color: white; color: black; margin-right: 2vh;"> Templates
                            </a>
                            <div class="dropdown-menu" aria-labelledby="attachmentDropdown">
                              <a class="dropdown-item" onclick="totemplate()"><i class="fa fa-file-alt"></i> Template 1</a>
            
                              <a class="dropdown-item" onclick="totemplate2()"><i class="fa fa-file-alt"></i>
                                Template 2</a>
            
                              <a class="dropdown-item" onclick="totemplate3()"><i class="fa fa-file-alt"></i>
                                Template 3</a>
            
            
                            </div>
            
                          </div>
            
                          <div class="col-md-6" style="text-align: center;">
                            {% if view.status == "draft" %}
                            <a href="{% url 'update_journal_status' view.id %}" class="btn btn-outline-warning" title="Save">
                              <i class="fa fa-save" aria-hidden="true"></i>
                            </a>
                            {% endif %}
                            <a href="" class="text-dark">
                              <button class="btn btn-outline-warning">
                                <i class="fa fa-edit"></i>
                              </button>
                            </a>
                            <!--<a class="text-dark" data-toggle="dropdown">
                              <button class="btn btn-outline-warning" title="Share"><i class="fas fa-share"></i></button>
                          </a>
                          <div class="dropdown-menu">
                              <a class="dropdown-item" data-target="#shareBillEmail" data-toggle="modal">GMAIL</a>
                              <a class="dropdown-item" href="javascript:void(0);" onclick="shareOnWhatsApp()">WhatsApp</a>
                          </div>-->
                          <a href="mailto:example@example.com" class="text-dark">
                            <button class="btn btn-outline-warning" title="Email"><i class="mdi mdi-email"></i></button>
                        </a>
                        
                        <a href="" class="  text-dark">
                          <button class="btn btn-outline-warning" title="Delete"><i class="fas fa-trash-alt"></i></button>
                        </a>
                            <a class="  text-dark" onclick="exportToPDF()">
                              <button class="btn btn-outline-warning" title="Pdf"><i class="fas fa-file-pdf-o"></i></button>
                            </a>
                            <a class=" text-dark" onclick="printSelectedArea()">
                              <button class="btn btn-outline-warning" title="Print"><i class="fas fa-print"></i>
                              </button>
                            </a>
                            <a class="text-dark" onclick="show_slip()">
                              <button class="btn btn-outline-warning" title="Slip"><i class="fas fa-receipt"></i></button></a>
                          </div>
                        </div><br>
            
                        <div class="row" id="div-to-pdf"
                          style="background-color: #ffddb0;  height: auto; margin-left:1px; margin-right: 1rem; ">
            
                          <div class="row text-center">
                            <h2 style="color: #000000;"><br>MANUAL JOURNAL
                              <hr>
                            </h2>
                          </div>
                          
                          <div class="gen-info col-6 " style="padding-left: 3rem; overflow-y: scroll; ">
                            <div class="row mt-1">
                              <div class="col-5"><label class="text-dark" for="">Notes </label></div>
                              <div class="col-7">
                                <p class="bold text-dark" style="max-width: 15rem;word-wrap: break-word;">:{{ view.notes }}</p>
                              </div>
                            </div>
                            <div class="row mt-3">
                              <div class="col-5"><label class="text-dark" for="">Reference no </label></div>
                              
                              <div class="col-7">
                                <p class="bold text-dark" style="max-width: 15rem;word-wrap: break-word;">:{{ view.reference_no}}</p>
                              </div>
                              
                            </div>
                            <div class="row mt-3">
                              <div class="col-5"><label class="text-dark" for="">Journal No</label></div>
                              <div class="col-7">
                                <p class="bold text-dark" style="max-width: 15rem;word-wrap: break-word;">
                                  :{{view.journal_no}}</p>
                              </div>
                            </div>
                            <div class="row mt-3">
                              <div class="col-5"><label class="text-dark" for="">Date </label></div>
                              <div class="col-7">
                                <p class="bold text-dark" style="max-width: 15rem;word-wrap: break-word;">
                                  :{{view.date}}</p>
                              </div>
                            </div>
                            <div class="row mt-3">
                              <div class="col-5"><label class="text-dark" for="">Amount </label></div>
                              <div class="col-7">
                                <p class="bold text-dark" style="max-width: 15rem;word-wrap: break-word;">
                                  :{{view.total_debit}}</p>
                              </div>
                            </div>
                            
                            
                          </div>
                          
                          <div class="p-info col-6" style="height: 100%; margin-bottom: 1vh;">
                            <div class="card" style="background-color: rgb(110, 61, 46); padding-left: 1rem; padding-top: 1rem;">
                              <div class="row text-center">
                                <h2>INFORMATION
                                  
                                </h2>
                              </div>
                              
                            
                              {% for entry in journal_entries %}
                              <hr>
                              <div class="row mt-2">
                                <div class="col-5"><label for="">Account Name </label></div>
                                <div class="col">
                                  <p class="bold">:{{entry.account}}</p>
                                </div>
                              </div>
                              <div class="row mt-2">
                                <div class="col-5"><label for="">Description </label></div>
                                <div class="col">
                                  <p class="bold">:{{entry.description}}</p>
                                </div>
                              </div>
                              <div class="row mt-2">
                                <div class="col-5"><label for="">Contact </label></div>
                                <div class="col">
                                  <p class="bold">:{{entry.contact}}</p>
                                </div>
                              </div>
                              <div class="row mt-2">
                                <div class="col-5"><label for="">Credits </label></div>
                                <div class="col">
                                  <p class="bold">:{{entry.credits}}</p>
                                </div>
                              </div>
            
                              <div class="row mt-2">
                                <div class="col-5"><label for="">Debits</label></div>
                                <div class="col">
                                  <p class="bold">:{{entry.debits}}</p>
                                </div>
                              </div>
                              {% endfor %}
                              <hr>
                              <div class="row mt-2">
                                <div class="col-5"><label for="">Total Debit </label></div>
                                <div class="col">
                                  <p class="bold">:{{view.total_debit}}</p>
                                </div>
                              </div>
                              <div class="row mt-2">
                                <div class="col-5"><label for="">Total Credit </label></div>
                                <div class="col">
                                  <p class="bold">:{{view.total_credit}}</p>
                                </div>
                              </div>
                              <div class="row mt-2">
                                <div class="col-5"><label for="">Difference </label></div>
                                <div class="col">
                                  <p class="bold">:{{view.difference}}</p>
                                </div>
                                <hr>
                              </div>
                              
                            </div><br>
                          </div>
                        </div>
                        
                       
            
                      </div>
            
                      <div class="col-md-8" id="slipdiv" style="display: none;">
                        <div class="row">
                          <div class="col-md-7">
                            <a class="text-white" style="font-size: 1.5rem;">
                              
                            </a>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-md-6">
                            <a class="btn" id="overviewbtn" onclick="tooverview()" style="background-color: chocolate; "><i
                                class="fas fa-eye"></i> Overview</a>
                            <a href=" " class=" btn fa fa-file-alt" data-bs-toggle="dropdown" id="attachmentDropdown"
                              aria-haspopup="true" aria-expanded="false"
                              style="background-color: white; color: black; margin-left: 2vh;"> Templates
                            </a>
            
                            <div class="dropdown-menu" aria-labelledby="attachmentDropdown">
                              <a class="dropdown-item" onclick="totemplate()"><i class="fa fa-file-alt"></i> Template 1</a>
            
                              <a class="dropdown-item" onclick="totemplate2()"><i class="fa fa-file-alt"></i>
                                Template 2</a>
            
                              <a class="dropdown-item" onclick="totemplate3()"><i class="fa fa-file-alt"></i>
                                Template 3</a>
            
            
                            </div>
            
                          </div>
            
                          <div class="col-md-6" style="text-align: center;">
                            {% if view.status == "draft" %}
                            <a href="{% url 'update_journal_status' view.id %}" class="btn btn-outline-warning" title="Save">
                              <i class="fa fa-save" aria-hidden="true"></i>
                            </a>
                            {% endif %}
                            <a href="" class=" text-dark">
                              <button class="btn btn-outline-warning" title="Edit"><i class="fas fa-edit"></i></button>
                            </a>
                            <a href="mailto:example@example.com" class="text-dark">
                              <button class="btn btn-outline-warning" title="Email"><i class="mdi mdi-email"></i></button>
                          </a>
                          
                          <a href="" class="  text-dark">
                            <button class="btn btn-outline-warning" title="Delete"><i class="fas fa-trash-alt"></i></button>
                          </a>
                            <a class="  text-dark" onclick="exportToPDF4()">
                              <button class="btn btn-outline-warning" title="Pdf"><i class="fas fa-file-pdf-o"></i></button>
                            </a>
                            <a class=" text-dark" onclick="printSelectedArea4()">
                              <button class="btn btn-outline-warning" title="Print"><i class="fas fa-print"></i>
                              </button>
                            </a>
                            <a class="text-dark" onclick="show_slip()">
                              <button class="btn btn-outline-warning" title="Slip"><i class="fas fa-receipt"></i></button></a>
                          </div>
                        </div>
            
            
                        <div style="background-color: rgb(255, 221, 176);" class="mx-2 my-4">
            
                          <div class="my-5 slip-page" size="A4">
                            <div class="row" style="margin-top: 20%; " id="printslip">
                              <div class="col-md-3"></div>
                              <div class="col-md-7">
                                <div class="card bg-white" style="border: 1px dotted black;padding: 20px;">
                                  <div class="mt-2" style="text-align: center;padding: 15px;">
                                    <div class="text-center" style="font-size: 3vh; color: black;">
                                      <b>{{company.company_name}} </b>
                                    </div>
                                    <span style="font-size: x-small; color: black;">{{company.address}} <br>
                                      {{company.city}},
                                      {{company.state}}
                                      {{company.pincode}} <br>
                                      {{ company.contact_number }} <br>{{ company.company_email }}
                                    </span>
                                  </div>
                                  <div class="ml-4 mt-2" style="color: black;">
                                    <div class="row">
                                      <div class="col-md-6 text-left">Date</div>
                                      <div class="col-md-5 text-right">:{{view.date}}</div>
                                    </div>
                                    <div class="row">
                                      <div class="col-md-6 text-left">Notes</div>
                                      <div class="col-md-5 text-right">:{{view.notes}}</div>
                                    </div>
                                    <div class="row">
                                      <div class="col-md-6 text-left">Reference No</div>
                                      <div class="col-md-5 text-right">:{{view.reference_no}}</div>
                                    </div>
                                    <div class="row">
                                      <div class="col-md-6 text-left">Journal No</div>
                                      <div class="col-md-5 text-right">:{{view.journal_no}}</div>
                                    </div>
                                    <div class="row">
                                      <div class="col-md-6 text-left">Amount</div>
                                      <div class="col-md-5 text-right">:{{view.total_debit}}</div>
                                    </div>
                                  </div>
                                  <div><br>
                                    <div class="equal-length-container" style="color: black; font-weight: bold;">
                                      <div class="equal-length-item" style=" text-align: center;">
                                        Account
                                        <hr style="border-bottom: 1px solid black; margin-top:1vh; width:95%">
                                      </div>
                                      
                                      <div class="equal-length-item" style=" text-align: center; ">
                                        Contact
                                        <hr style="border-bottom: 1px solid black; margin-top:1vh; width:60%">
                                      </div>
                                      <div class="equal-length-item" style=" text-align: center; ">
                                        Debits
                                        <hr style="border-bottom: 1px solid black; margin-top:1vh; width:60%">
                                      </div>
                                      <div class="equal-length-item" style=" text-align: center; ">
                                        Credits
                                        <hr style="border-bottom: 1px solid black; margin-top:1vh; width:60%">
                                      </div>
                                      
                                    </div>
                                  </div>
                                  <div>
                                    {% for view in journal_entries %}
                                    <div class="equal-length-container"
                                      style="color: black; font-size: small; word-wrap: break-word; margin-bottom: 1vh;">
                                      <div class="equal-length-item" style="text-align: center; margin-left: 2px;">
                                        {{view.account}}
                                      </div>
                                    
                                      <div class="equal-length-item" style="text-align: center; ">
                                        {{view.contact}}
                                      </div>
                                      <div class="equal-length-item" style="text-align: center; ">
                                        {{view.debits}}
                                      </div>
                                      <div class="equal-length-item" style="text-align: center; ">
                                        {{view.credits}}
                                      </div>
                                      
                                    </div>
                                    {% endfor %}
                                  </div>
            
                                  <div><br>
                                    <div class="row ">
                                      <div class="col-md-5 text-left" style=" color: black;">
                                       Total Credit
                                      </div>
                                      <div class="col-md-6 " style="color: black;text-align: end;">
                                        {{ view.total_credit }}
                                      </div>
                                    </div>
                                   
                                    <div class="row">
                                      <div class="col-md-5 text-left" style=" color: black;">
                                        Total Debit
                                      </div>
                                      <div class="col-md-6 " style="color: black;text-align: end;">
                                        {{ view.total_debit }}
                                      </div>
                                    </div>
                                    <div class="row">
                                      <div class="col-md-5 text-left" style=" color: black;">
                                        Difference
                                      </div>
                                      <div class="col-md-6 " style="color: black;text-align: end;">
                                        {{ view.difference }}
                                      </div>
                                    </div>
                                   
                                    <hr class="ml-2 mr-2" style="color: black; border-bottom: 1px solid black; ">
                                  </div>
            
            
                                 
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
            
                      <div class="col-md-8" id="templatediv" style="display: none;">
                        <div class="row">
                          <div class="col-md-7">
                            <a class="text-white" style="font-size: 1.5rem;">
                              
                            </a>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-md-6">
                            <a class="btn" id="overviewbtn" onclick="tooverview()" style="background-color: chocolate; "><i
                                class="fas fa-eye"></i> Overview</a>
                            <a href=" " class=" btn fa fa-file-alt" data-bs-toggle="dropdown" id="attachmentDropdown"
                              aria-haspopup="true" aria-expanded="false"
                              style="background-color: white; color: black; margin-left: 2vh;"> Templates
                            </a>
            
                            <div class="dropdown-menu" aria-labelledby="attachmentDropdown">
                              <a class="dropdown-item" onclick="totemplate()"><i class="fa fa-file-alt"></i> Template 1</a>
            
                              <a class="dropdown-item" onclick="totemplate2()"><i class="fa fa-file-alt"></i>
                                Template 2</a>
            
                              <a class="dropdown-item" onclick="totemplate3()"><i class="fa fa-file-alt"></i>
                                Template 3</a>
            
            
                            </div>
            
                          </div>
            
                          <div class="col-md-6" style="text-align: center;">
                            {% if view.status == "draft" %}
                            <a href="{% url 'update_journal_status' view.id %}" class="btn btn-outline-warning" title="Save">
                              <i class="fa fa-save" aria-hidden="true"></i>
                            </a>
                            {% endif %}
                            <a href="" class=" text-dark">
                              <button class="btn btn-outline-warning" title="Edit"><i class="fas fa-edit"></i></button>
                            </a>
                            <a href="mailto:example@example.com" class="text-dark">
                              <button class="btn btn-outline-warning" title="Email"><i class="mdi mdi-email"></i></button>
                          </a>
                          
                          <a href="" class="  text-dark">
                            <button class="btn btn-outline-warning" title="Delete"><i class="fas fa-trash-alt"></i></button>
                          </a>
                            <a class="  text-dark" onclick="exportToPDF()">
                              <button class="btn btn-outline-warning" title="Pdf"><i class="fas fa-file-pdf-o"></i></button>
                            </a>
                            <a class=" text-dark" onclick="printSelectedArea()">
                              <button class="btn btn-outline-warning" title="Print"><i class="fas fa-print"></i>
                              </button>
                            </a>
                            <a class="text-dark" onclick="show_slip()">
                              <button class="btn btn-outline-warning" title="Slip"><i class="fas fa-receipt"></i></button></a>
                          </div>
                        </div>
            
            
            
            
            
                        <div class="mt-3 template2 whatToPrint2" style="height: auto;width: 100%; margin-left: -1vh">
            
                          <section id="selected-area" style="background-color: rgb(255, 221, 176);height: auto;" class=" p-2 m-2">
                            <header style="	background-color: #8b3131;border-radius: 1rem;">
                              <div class="logo ">
                                <img class="ml-2" width="100rem" style="border-radius: 50%;" src="{% static 'images/zlogo.png' %}"
                                  alt="Company Logo">
                              </div>
                              <div style="background: #8b3131;color: white;" class="company-info">
                                <h2 class="text-white">{{company.company_name}}</h2>
                                <p class="text-white"> {{company.address}}<br>{{company.city}}</p>
                                <p> {{company.contact_number}}</p>
                                <p>{{company.company_email}}</p>
                              </div>
                            </header>
                            <div class="invoice-box">
                              <h1 class="text-dark">Manual Journal</h1>
                              <div class="invoice-header">
                                <div class="invoice-details text-dark">
                                  <table>
                                    <tr>
                                      <td class="table-cell text-black" style="border: none;">Notes</td>
                                      <td class="table-cell text-black" style="border: none;">:</td>
                                      <td class="table-cell text-black" style="border: none;">{{view.notes}}</td>
                                    </tr>
                                    <tr>
                                      <td class="table-cell text-black" style="border: none;">Reference No</td>
                                      <td class="table-cell text-black" style="border: none;">:</td>
                                      <td class="table-cell text-black" style="border: none;">{{view.reference_no}}</td>
                                    </tr>
                                    <tr>
                                      <td class="table-cell text-black" style="border: none;">JournalNo</td>
                                      <td class="table-cell text-black" style="border: none;">:</td>
                                      <td class="table-cell text-black" style="border: none;">{{view.journal_no}}</td>
                                    </tr>
                                    <tr>
                                      <td class="table-cell text-black" style="border: none;">Date</td>
                                      <td class="table-cell text-black" style="border: none;">:</td>
                                      <td class="table-cell text-black" style="border: none;">{{view.date}}</td>
                                    </tr>
                                    <tr>
                                      <td class="table-cell text-black" style="border: none;">Amount</td>
                                      <td class="table-cell text-black" style="border: none;">:</td>
                                      <td class="table-cell text-black" style="border: none;">{{view.total_debit}}</td>
                                    </tr>
                                  </table>
                                </div>
                                <!--<div class="client-details" style="width: 50vh;">
                                  <table>
                                    <tr>
                                      <td class="table-cell text-black" style="border: none;"><b>{{sale.customer.customerName}}</b>
                                      </td>
                                    </tr>
                                    {% if sale.customer.Address1 %}
                                    <tr>
                                      <td class="table-cell text-black" style="border: none;">{{sale.customer.Address1}}</td>
                                    </tr>
                                    {% endif %}
                                    <tr>
                                      <td class="table-cell text-black" style="border: none;">{{sale.customer.GSTTreatment}}</td>
                                    </tr>
                                    {% if sale.customer.GSTIN %}
                                    <tr>
                                      <td class="table-cell text-black" style="border: none;">{{sale.customer.GSTIN}}</td>
                                    </tr>
                                    {% endif %}
                                  </table>
                                </div>-->
                              </div>
            
                              <table>
                                <thead>
                                  <tr>
            
                                    <th id="th" style="text-align: center;">Account Name</th>
                                    <th id="th" style="text-align: center;">Description</th>
                                    <th id="th" style="text-align: center;">Contact</th>
                                    <th id="th" style="text-align: center;">Debit</th>
                                    <th id="th" style="text-align: center;">Credit</th>
                                   
                                  </tr>
                                </thead>
                                {% for view in journal_entries %}
                                <tbody>
                                  
                                  <tr style="color: black;">
                                    
                                    <td style="text-align: center;">{{view.account}}</td>
                                    <td style="text-align: center;">{{view.description}}</td>
                                    <td style="text-align: center;">{{view.contact}}</td>
                                    <td style="text-align: center;">{{view.debits}}</td>
                                    <td style="text-align: center;">{{view.credits}}</td>
                                    
                                  </tr>
                                  
            
                                </tbody>
                                {% endfor %}
                              </table><br>
            
                              <div class="invoice-total">
                                <div class="row">
                                  <div class="col-6"></div>
            
            
                                  <div class="col-4">
                                    <table style="margin-left: 10vh;">
                                      <tr>
                                        <td class="table-cell text-black" style="border: none;">Total Credit</td>
                                        <td class="table-cell text-black" style="border: none;">:</td>
                                        <td class="table-cell text-black" style="border: none;"><b>{{view.total_credit}}</b></td>
                                      </tr>
                                     
                                      <tr>
                                        <td class="table-cell text-black" style="border: none;">Total Debit</td>
                                        <td class="table-cell text-black" style="border: none;">:</td>
                                        <td class="table-cell text-black" style="border: none;">{{view.total_debit}}</td>
                                      </tr>
                                      <tr>
                                        <td class="table-cell text-black" style="border: none;">Difference</td>
                                        <td class="table-cell text-black" style="border: none;">:</td>
                                        <td class="table-cell text-black" style="border: none;">{{view.difference}}</td>
                                      </tr>
                                     
                                     
                                    </table>
                                  </div>
            
                                </div>
            
                              </div>
            
                            </div>
            
                            <footer class="mb-5">
                              <p class="text-dark">&copy; Zho Books 2023 | Info park kakkanad kochi, Ernamkulam, kerala India 12345
                                | Phone: (123) 456-7890 | Email: info@zohodjango.com</p>
                            </footer>
                          </section>
                        </div>
                      </div>
            
                      <div class="col-md-8" id="templatediv2" style="display: none;">
                        <div class="row">
                          <div class="col-md-7">
                            <a class="text-white" style="font-size: 1.5rem;">
                             
                            </a>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-md-6">
                            <a class="btn" id="overviewbtn" onclick="tooverview()" style="background-color: chocolate; "><i
                                class="fas fa-eye"></i> Overview</a>
                            <a href=" " class=" btn fa fa-file-alt" data-bs-toggle="dropdown" id="attachmentDropdown"
                              aria-haspopup="true" aria-expanded="false"
                              style="background-color: white; color: black; margin-left: 2vh;"> Templates
                            </a>
            
                            <div class="dropdown-menu" aria-labelledby="attachmentDropdown">
                              <a class="dropdown-item" onclick="totemplate()"><i class="fa fa-file-alt"></i> Template 1</a>
            
                              <a class="dropdown-item" onclick="totemplate2()"><i class="fa fa-file-alt"></i>
                                Template 2</a>
            
                              <a class="dropdown-item" onclick="totemplate3()"><i class="fa fa-file-alt"></i>
                                Template 3</a>
            
            
                            </div>
            
                          </div>
            
                          <div class="col-md-6" style="text-align: center;">
                            {% if view.status == "draft" %}
                            <a href="{% url 'update_journal_status' view.id %}" class="btn btn-outline-warning" title="Save">
                              <i class="fa fa-save" aria-hidden="true"></i>
                            </a>
                            {% endif %}
                            <a href="" class=" text-dark">
                              <button class="btn btn-outline-warning" title="Edit"><i class="fas fa-edit"></i></button>
                              <a href="mailto:example@example.com" class="text-dark">
                                <button class="btn btn-outline-warning" title="Email"><i class="mdi mdi-email"></i></button>
                            </a>
                            
                            <a href="" class="  text-dark">
                              <button class="btn btn-outline-warning" title="Delete"><i class="fas fa-trash-alt"></i></button>
                            </a>
                            <a class="  text-dark" onclick="exportToPDF2()">
                              <button class="btn btn-outline-warning" title="Pdf"><i class="fas fa-file-pdf-o"></i></button>
                            </a>
                            <a class=" text-dark" onclick="printSelectedArea2()">
                              <button class="btn btn-outline-warning" title="Print"><i class="fas fa-print"></i>
                              </button>
                            </a>
                            <a class="text-dark" onclick="show_slip()">
                              <button class="btn btn-outline-warning" title="Slip"><i class="fas fa-receipt"></i></button></a>
                          </div>
                        </div>
            
            
            
            
            
                        <div id="template1" class="printTemplates template1">
                          <div class="my-3 page" style="background-color: rgb(255, 221, 176);" id="selected-area2">
                            <div class="p-5">
                              <div style="background-color: #8b3131;border-radius: 1rem;padding: 20px;">
                                <center class="h3"><b>MANUAL Journal</b></center>
                              </div>
                              <div class="row mt-5">
                                <div class="col-md-8">
                                  <h4 class="text-secondary" style="font-weight: bold;">{{company.company_name }}</h4>
                                  <p class="address" style="font-weight: bold;color: #000;">
                                    {{company.address}}<br>
                                    {{company.city}},
                                    {{company.state}}<br>
                                    {{company.pincode}}<br>
                                    {{company.company_email}}<br>
                                    {{company.contact_number}}<br>
                                  </p>
                                </div>
                                <div class="col-md-4">
                                  <div class="top-left">
                                    <div class="mt-2">
                                      <p style="color: #000;">Notes
                                        <b>:{{ view.notes}}</b>
                                      </p>
                                      <p style="color: #000;">Date
                                        <b>:{{ view.date}}</b>
                                      </p>
                                      <p style="color: #000;">Journal no
                                        <b>:{{ view.journal_no}}</b>
                                      </p>
                                      <p style="color: #000;">Reference no
                                        <b>:{{ view.reference_no}}</b>
                                      </p>
                                      <p style="color: #000;">Amount
                                        <b>:{{ view.total_debit}}</b>
                                      </p>
                                    </div>
                                  </div>
                                </div>
                              </div>
                              <section class="top-content bb d-flex justify-content-between">
                                <div class="logo">
            
                                </div>
            
                              </section>
            
                              
            
                              <section class="product-area mt-2">
                                <table class="table table-hover table-bordered table-secondary">
                                  <thead>
                                    <tr class="">
                                      <th class="text-center" style="color:#8b3131;">Account Name</th>
                                      <th class="text-center" style="color:#8b3131;">Description</th>
                                      <th class="text-center" style="color:#8b3131;">Contact</th>
                                      <th class="text-center" style="color:#8b3131;">Debits</th>
                                      <th class="text-center" style="color:#8b3131;">Credits</th>
                                      
                                    </tr>
                                  </thead>
                                  {% for view in journal_entries %}
                                  <tbody>
                                    
                                    <tr>
                                      
                                      <td class="text-center" style="color:#000">{{ view.account }}</td>
                                      <td class="text-center" style="color:#000">{{ view.description}}</td>
                                      <td class="text-center" style="color:#000">{{ view.contact }}</td>
                                      <td class="text-center" style="color:#000">{{ view.debits }}</td>
                                      <td class="text-center" style="color:#000">{{ view.credits }}</td>
                                      
                                    </tr>
                                    
                                    
                                  </tbody>
                                  {% endfor %}
                                </table>
                              </section>
            
                              <section class="balance-info">
                                <div class="row mt-3">
                                  <div class="col-4">
                                    <table class="table table-borderless">
                                      <tbody>
            
                                        <!-- <tr >
                                                          <td style="color: #000;text-align: left;">Payment Type</td>
                                                          <td style="color: #000;text-align: left;">:</td>
                                                          {% if bank %}
                                                          <th style="color: #000;text-align: center;">{{bank.bankname}}</th>
                                                          {% else %}
                                                          <th style="color: #000;text-align: center;">{{pbill.payment_type}}</th>
                                                          {% endif %}
                                                      </tr>
                                                      <tr>
                                                          <td></td>
                                                          <td></td>
                                                          <td></td>
                                                          
                                                      </tr> -->
                                        
            
                                      </tbody>
                                    </table>
                                  </div>
                                  <div class="col-4"></div>
                                  <div class="col-4">
                                    <table class="table table-borderless">
                                      <tbody>
                                        <tr>
                                          <td style="color: #000;">Total Credit</td>
                                          <td style="color: #000;">:</td>
                                          <td class="text-center" style="color: #000;">
                                            {{view.total_credit}}</td>
                                        </tr>
                                       
                                        <tr>
                                          <td style="color: #000;">Total Debit</td>
                                          <td style="color: #000;">:</td>
                                          <td class="text-center" style="color: #000;">
                                            {{view.total_debit}}</td>
                                        </tr>
                                        <tr>
                                          <td style="color: #000;">difference</td>
                                          <td style="color: #000;">:</td>
                                          <td class="text-center" style="color: #000;">
                                            {{view.difference}}</td>
                                        </tr>
                                        
            
                                      </tbody>
            
                                    </table>
            
                                  </div>
                                </div>
                                <footer class="mb-5">
                                  <p class="text-dark">&copy; Zho Books 2023 | Info park kakkanad kochi,
                                    Ernamkulam,
                                    kerala India 12345
                                    | Phone: (123) 456-7890 | Email: info@zohodjango.com</p>
                                </footer>
                              </section>
            
                            </div>
                          </div>
                        </div>
            
                      </div>
            
                      <div class="col-md-8" id="templatediv3" style="display: none;">
                        <div class="row">
                          <div class="col-md-7">
                            <a class="text-white" style="font-size: 1.5rem;">
                              
                            </a>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-md-6">
                            <a class="btn" id="overviewbtn" onclick="tooverview()" style="background-color: chocolate;"><i
                                class="fas fa-eye"></i> Overview</a>
                            <a href=" " class=" btn fa fa-file-alt" data-bs-toggle="dropdown" id="attachmentDropdown"
                              aria-haspopup="true" aria-expanded="false"
                              style="background-color: white; color: black; margin-left: 2vh;"> Templates
                            </a>
            
                            <div class="dropdown-menu" aria-labelledby="attachmentDropdown">
                              <a class="dropdown-item" onclick="totemplate()"><i class="fa fa-file-alt"></i> Template 1</a>
            
                              <a class="dropdown-item" onclick="totemplate2()"><i class="fa fa-file-alt"></i>
                                Template 2</a>
            
                              <a class="dropdown-item" onclick="totemplate3()"><i class="fa fa-file-alt"></i>
                                Template 3</a>
            
            
                            </div>
            
                          </div>
            
                          <div class="col-md-6" style="text-align: center;">
                            {% if view.status == "draft" %}
                            <a href="{% url 'update_journal_status' view.id %}" class="btn btn-outline-warning" title="Save">
                              <i class="fa fa-save" aria-hidden="true"></i>
                            </a>
                            {% endif %}
                            <a href="" class=" text-dark">
                              <button class="btn btn-outline-warning" title="Edit"><i class="fas fa-edit"></i></button>
                            </a>
                            <a href="mailto:example@example.com" class="text-dark">
                              <button class="btn btn-outline-warning" title="Email"><i class="mdi mdi-email"></i></button>
                          </a>
                          
                          <a href="" class="  text-dark">
                            <button class="btn btn-outline-warning" title="Delete"><i class="fas fa-trash-alt"></i></button>
                          </a>
                            <a class="  text-dark" onclick="exportToPDF3()">
                              <button class="btn btn-outline-warning" title="Pdf"><i class="fas fa-file-pdf-o"></i></button>
                            </a>
                            <a class=" text-dark" onclick="printSelectedArea3()">
                              <button class="btn btn-outline-warning" title="Print"><i class="fas fa-print"></i>
                              </button>
                            </a>
                            <a class="text-dark" onclick="show_slip()">
                              <button class="btn btn-outline-warning" title="Slip"><i class="fas fa-receipt"></i></button></a>
                          </div>
                        </div>
            
            
            
            
            
                        <div id="template3" class="template3">
                          <div class="my-5 page" size="A4" style="background-color: rgb(255, 221, 176);">
                            <div class="p-5" id="selected-area3">
                              <section class="top-content bb d-flex justify-content-between" style="background-color: #8b3131;">
                                <div class="logo">
                                  <!-- <img src="logo.png" alt="" class="img-fluid"> -->
                                </div>
                                <div class="top-left">
                                  <div >
                                    <p style="font-size:15px;color:white;">Manual Journal</p>
                                  </div>
                                  
                                </div>
                              </section>
            
                              <section class="store-user mt-5">
                                <div class="col-12">
                                  <div class="row bb pb-3">
                                    <div class="col-7">
                                      <p>FROM,</p>
                                      <h5>{{company.company_name }}</h5>
                                      <p class="address "> {{company.address}}<br>
                                        {{company.city}},
                                        {{company.state}}<br>
                                        {{company.pincode}}<br>
                                      </p>
            
                                    </div>
                                    <!--<div class="col-5">
                                      <p>TO,</p>
                                      <h5>{{sale.customer.customerName}}</h5>
                                      <p class="address col-9" style="margin-left: 0px;">
                                        {{sale.customer.Address1}} </p><br>
                                      <p class="address col-9">{{sale.customer.GSTTreatment}}</p><br>
                                      <p class="address col-9">{{sale.customer.GSTIN}}</p>
            
            
                                    </div>-->
                                  </div>
                                  <div class="row extra-info pt-3">
                                    <div class="col-7">
                                      <p>Notes
                                        <span>:{{view.notes}}</span>
                                      </p>
                                      <p>Date
                                        <span>:{{view.date}}</span>
                                      </p>
                                      <p>Journal No
                                        <span>:{{view.journal_no}}</span>
                                      </p>
                                      <p>Reference No
                                        <span>:{{view.reference_no}}</span>
                                      </p>
                                      <p>Amount
                                        <span>:{{view.total_debit}}</span>
                                      </p>
                                    </div>
            
                                  </div>
                                </div>
                              </section>
            
                              <section class="product-area mt-4">
                                <table class=" table table-hover table-bordered " id="table1">
                                  <thead>
                                    <tr>
                                      <td style="text-align: center; font-weight:bold; color:black ">Account name</td>
                                      <td style="font-weight:bold; color:black">Description</td>
                                      <td style="font-weight:bold; color:black">Contact</td>
                                      <td style="font-weight:bold; color:black">Debits</td>
                                      <td style="font-weight:bold; color:black">Credits</td>
                                     
                                    </tr>
                                  </thead>
                                  {% for view in journal_entries %}
                                  <tbody>
            
                                    <tr>
                                      
                                      <td style="color:black; text-align: center;">{{view.account}}</td>
                                      <td style="color:black">{{view.description}}</td>
                                      <td style="color:black">{{view.contact}}</td>
                                      <td style="color:black">{{view.debits}} </td>
                                      <td style="color:black">{{view.credits}} </td>
                                      
            
                                    </tr>
                                    
                                  </tbody>
                                  {% endfor %}
                                </table><br><br>
                              </section>
            
                              <section class="balance-info">
                                <div class="row">
                                  <div class="col-4"></div>
                                  <div class="col-4"></div>
                                  <div class="col-4">
                                    <table class="table table-borderless">
                                      <tbody>
                                        <tr>
                                          <td style="color: #000;">Total Debit</td>
                                          <td style="color: #000;">:</td>
                                          <td class="text-right" style="color: #000;">
                                            {{view.total_debit}}</td>
                                        </tr>
                                        
                                        <tr>
                                          <td style="color: #000;">Total Credit</td>
                                          <td style="color: #000;">:</td>
                                          <td class="text-right" style="color: #000;">
                                            {{view.total_credit}}</td>
                                        </tr>
                                        <tr>
                                          <td style="color: #000;">Difference</td>
                                          <td style="color: #000;">:</td>
                                          <td class="text-right" style="color: #000;">{{view.difference}}</td>
                                        </tr>
                                        
            
                                      </tbody>
            
                                    </table>
            
                                  </div>
            
                                  <footer class="mb-5">
                                    <p class="text-dark">&copy; Zho Books 2023 | Info park kakkanad kochi,
                                      Ernamkulam,
                                      kerala India 12345
                                      | Phone: (123) 456-7890 | Email: info@zohodjango.com</p>
                                  </footer>
                                </div>
                              </section>
            
                              <!-- Cart BG -->
                              <img src="cart.jpg" class="img-fluid cart-bg" alt="">
            
                              <!-- <footer>
                                              <hr>
                                              <p class="m-0 text-center">
                                                  View THis Invoice Online At - <a href="#!"> invoice/saburbd.com/#868 </a>
                                              </p>
                                              <div class="social pt-3">
                                                  <span class="pr-2">
                                                      <i class="fas fa fa-mobile-alt"></i>
                                                      <span>0123456789</span>
                                                  </span>
                                                  <span class="pr-2">
                                                      <i class="fas fa fa-envelope"></i>
                                                      <span>me@saburali.com</span>
                                                  </span>
                                                  <span class="pr-2">
                                                      <i class="fab fa-facebook-f"></i>
                                                      <span>/sabur.7264</span>
                                                  </span>
                                                  <span class="pr-2">
                                                      <i class="fab fa-youtube"></i>
                                                      <span>/abdussabur</span>
                                                  </span>
                                                  <span class="pr-2">
                                                      <i class="fab fa-github"></i>
                                                      <span>/example</span>
                                                  </span>
                                              </div>
                                          </footer> -->
                            </div>
                          </div>
                        </div>
            
                      </div>
                      <!-- Share bill Modal -->
                      <div class="modal fade" id="shareBillEmail">
                        <div class="modal-dialog modal-xl">
                          <div class="modal-content" style="background: rgb(32, 35, 37);border-radius: 20px;">
                            <div class="modal-header" style="background: rgb(32, 35, 37);">
                              <h5 class="m-3 text-uppercase" id="shareBillEmailLabel">Share Manual Journal Via Email</h5>
                              <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                                  aria-hidden="true">&times;</span></button>
                            </div>
                            <div class="modal-body" style="background: rgb(32, 35, 37);">
                              <div class="card p-3 m-3">
                                <form action="" method="post" class="needs-validation"
                                  id="share_to_email_form" autocomplete="off">
                                  {% csrf_token %}
                                  <div class="form-group">
                                    <label for="emailIds">Email IDs</label>
                                    <textarea class="form-control text-dark" name="email_ids" id="emailIds" rows="5"
                                      placeholder="Multiple emails can be added by separating with a comma(,)." required></textarea>
                                  </div>
                                  <div class="form-group mt-2">
                                    <label for="item_unitname">Message(optional)</label>
                                    <textarea name="email_message" id="email_message" class="text-dark form-control" cols=""
                                      rows="4" placeholder="This message will be sent along with Bill details."></textarea>
                                  </div>
                                </form>
                              </div>
                              <div class="modal-footer d-flex justify-content-center" style="border-top: 1px solid #ffff;">
                                <input type="submit" id="share_with_email"
                                  class="submitShareEmailBtn rounded-pill text-grey w-50 my-4 mx-3" value="SEND MAIL">
                              </div>
                            </div>
            
                          </div>
                        </div>
                      </div>
            
                    </div>
            
                  </div>
                        <!--------- Modal for attaching file ---------->
                        <div class="modal fade" id="attachFileModal" tabindex="-1" role="dialog" aria-labelledby="attachFileModalLabel" aria-hidden="true">
                            <div class="modal-dialog" role="document">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h5 class="modal-title" id="attachFileModalLabel">Attach File</h5>
                                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                            <span aria-hidden="true">&times;</span>
                                        </button>
                                    </div>
                                    <div class="modal-body">
                                        <form method="post" action="" enctype="multipart/form-data">
                                            {% csrf_token %}
                                            <div class="form-group">
                                                <label for="attachment">Choose File:</label>
                                                <input type="file" name="attachment" id="attachment" required>
                                            </div>
                                            <button type="submit" class="btn btn-outline-warning mt-3">Attach File</button>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!----------- modal for email -------------->
                        <div class="modal fade" id="EmailModal">
                            <div class="modal-dialog modal-xl">
                              <div class="modal-content" style="background: rgb(32, 35, 37);border-radius: 20px;">
                                <div class="modal-header" style="background: rgb(32, 35, 37);">
                                  <h5 class="m-3 text-uppercase" id="EmailModalLabel" style="color: #fefefe;">Share Item Transactions Via Email</h5>
                                  <button type="button" class="close text-danger" style="width: 30px;" data-dismiss="modal" aria-label="Close"><span
                                      aria-hidden="true">&times;</span></button>
                                </div>
                                <div class="modal-body" style="background: rgb(32, 35, 37);">
                                  <div class="card p-3 m-3">
                                    <form action="" method="post" class="needs-validation"
                                      id="share_to_email_form" autocomplete="off">
                                      {% csrf_token %}
                                      <div class="form-group">
                                        <label for="emailIds" style="color: #000;">Email IDs</label>
                                        <textarea class="form-control text-dark"  style="color: #000;" name="email_ids" id="emailIds" rows="5"
                                          placeholder="Multiple emails can be added by separating with a comma(,)." required></textarea>
                                      </div>
                                      <div class="form-group mt-2">
                                        <label for="item_unitname"  style="color: #000;">Message(optional)</label>
                                        <textarea name="email_message"  style="color: #000;" id="email_message" class="text-dark form-control" cols=""
                                          rows="4" placeholder="This message will be sent along with details."></textarea>
                                      </div>
                               
                                  </div>
                                  <div class="modal-footer d-flex justify-content-center" style="border-top: 1px solid #ffff;">
                                    <input type="submit" id="share_with_email"
                                      class="submitShareEmailBtn rounded-pill text-grey w-50 my-4 mx-3" value="SEND MAIL">
                                  </div>
                                </div>
                              </form>
                              </div>
                            </div>
                          </div>
                          <!--------- add comment ---------------->
                          <div class="modal fade mt-5" id="addCommentModal" tabindex="-1" role="dialog" aria-labelledby="addCommentModalLabel" aria-hidden="true">
                            <div class="modal-dialog modal-lg" role="document">
                                <div class="modal-content" style="background-color: #3b3b3b;">
                                    <div class="modal-header">
                                        <h5 class="modal-title text-light" id="addCommentModalLabel">Comments</h5>
                                        <a type="button" class="close text-light "  data-dismiss="modal" aria-label="Close">
                                            <span aria-hidden="true" style="font-size: x-large;">&times;</span>
                                        </a>
                                    </div>
                                    <div class="modal-body ">
                                        <form method="post" action="">
                                            {% csrf_token %}
                                            <label class="text-light" for="comment_text">Add Comment:</label>
                                            <input type="text" class="form-control  text-light" name="comment_text" class="form-control" required>
                        
                                            <!-- Comment Table -->
                                            <table class="table rounded mt-3 text-light text-center">
                                                <thead>
                                                    <tr class="font-weight-bold ">
                                                        <th scope="col" class="border-light">NO.</th>
                                                        <th scope="col" class="border-light">COMMENTS</th>
                                                        <th scope="col" class="border-light">BY</th>
                                                        <th scope="col" class="border-light">DATE</th>
                                                        <th scope="col" class="border-light">DELETE</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    {% for comment in comments %}
                                                        <tr>
                                                            <td class="border-light">{{ forloop.counter }}</td>
                                                            <td class="border-light">{{ comment.comment }}</td>
                                                            <td class="border-light">{{comment.login_details.first_name}} {{comment.login_details.last_name}}</td>
                                                            <td class="border-light">{{ comment.date_added }}</td>
                                                            <td class=" border-light">
                                                                <a class="btn text-danger" onclick="deleteComment('{{ comment.id }}', '{{ price_list.id }}')">
                                                                    <i class="fas fa-trash"></i>
                                                                </a>
                                                            </td>
                                                        </tr>
                                                    {% endfor %}
                                                </tbody>
                                            </table>
                                            <!-- End Comment Table -->
                        
                                            <div class="modal-footer">
                                                <button type="button" class="btn btn-outline-warning" data-dismiss="modal">Close</button>
                                                <button type="submit" class="btn btn-outline-warning">Save</button>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-------- display transaction history ------------>
                        <div class="modal fade mt-5" id="TransactionHistory" tabindex="-1" role="dialog" aria-labelledby="TransactionHistoryModalLabel" aria-hidden="true">
                            <div class="modal-dialog modal-lg " role="document">
                                <div class="modal-content " style="background-color: #3b3b3b; color: white;">
                                    <div class="modal-header">
                                        <h5 class="modal-title text-light" id="TransactionHistoryModalLabel">Transaction History</h5>
                                        <a type="button" class="close text-light "  data-dismiss="modal" aria-label="Close">
                                            <span aria-hidden="true" style="font-size: x-large;">&times;</span>
                                        </a>
                                    </div>
                                    <div class="modal-body">
                                        {% if transaction_history %}
                                            <table class="table rounded bg-black text-white text-center p-2" >
                                                <thead>
                                                    <tr>
                                                        <th scope="col" class="border-bottom border-dark"><b>NO.</b></th>
                                                        <th scope="col" class="border-bottom border-dark"><b>DATE</b></th>
                                                        <th scope="col" class="border-bottom border-dark"><b>ACTION</b></th>
                                                        <th scope="col" class="border-bottom border-dark"><b>BY</b></th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    {% for transaction in transaction_history %}
                                                        <tr>
                                                            <td class="border-bottom border-dark">{{ forloop.counter }}</td>
                                                            <td class="border-bottom border-dark">{{ transaction.date }}</td>
                                                            <td class="border-bottom border-dark">{{ transaction.action }}</td>
                                                            <td class="border-bottom border-dark">{{ transaction.login_details.username }}</td>
                                                        </tr>
                                                    {% endfor %}
                                                </tbody>
                                            </table>
                                        {% else %}
                                            <p>No price list selected.</p>
                                        {% endif %}
                                    </div>
                                    
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-outline-warning" data-dismiss="modal">Close</button>
                                    </div>
                                </div>
                            </div>
                        </div>  
                        <!--}-->
                    </div>
                </div>
            </div>
        </div>
    </div>


<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>    
<script src="https://kit.fontawesome.com/76ed4bac95.js" crossorigin="anonymous"></script>
<script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/css/select2.min.css" integrity="sha512-Ev2QLO/xB7oWe9yZ9ZKfNL4/rI91JcxVwDorGnS8mpE4K2H8lPcJbXbu+U53SknxLvEO2Dg4I3nk2f6r59dzWg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/js/select2.min.js" integrity="sha512-JBnKdD6fzZxB1sdbBUz0qwZRiA84ZgeBp6T5qL/zUa8z+prM7zvmknGQn6uAkeTn5uaqQpIs4s6f6FLSbNPGw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-Bk2IxCYIbW6l0/mD4YKs/wE6xxvCEjVyQVuRj2VuTKlf6Ayb6BjdrM6OtqLZiVNiGKcFtdNPxXEhR9Wx4sLh9g==" crossorigin="anonymous" referrerpolicy="no-referrer" />

<script>
    function deleteComment(commentId, priceListId) {
        if (confirm('Are you sure you want to delete this comment?')) {
            window.location.href = `/delete_pricelist_comment/${commentId}/${priceListId}/`;
        }
    }
</script>

<script>
    $(document).ready(function() {
        var $li = $('#priceListNames li'); 
        $('#search').keyup(function() {
            var val = $.trim($(this).val()).replace(/ +/g, ' ').toLowerCase();
            $li.show().filter(function() {
                var text = $(this).text().replace(/\s+/g, ' ').toLowerCase();
                return !~text.indexOf(val);
            }).hide();
        });
    });
</script>

      <script>
        function sortPriceLists() {
            var $ul = $('#priceListNames ul');
            var items = $ul.children('li').get();
            items.sort(function(a, b) {
                var keyA = $(a).text();
                var keyB = $(b).text();
                return keyA.localeCompare(keyB);
            });
            $ul.append(items);
        }
          function filterPriceLists() {
              var $ul = $('#priceListNames ul');
              var filter = 'Active'; 
              $ul.children('li').hide().filter(function() {
                  return $(this).text().includes(filter);
              }).show();
          }
      </script>
    <script>

        function printPriceList() {
            window.print();
        }

        function toggleStatus() {
            const priceListId = {{ price_list.id }};
            window.location.href = `/toggle_price_list_status/${priceListId}/`;
        }
    </script>

    <script>
        $(document).ready(function () {
          $('#shareBillEmail').modal();
        });
      </script>
      
      
            <script src="https://code.jquery.com/jquery-3.x.x.min.js"></script>
            <script src="path/to/jquery.min.js"></script>
            <script src="path/to/bootstrap.min.js"></script>
      
            <script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js"
              integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
              crossorigin="anonymous"></script>
            <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js"
              integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
              crossorigin="anonymous"></script>
      
      </section>
      {% for message in messages %}
      
      <script>
        let msg = '{{message}}';
        alert(msg);
      </script>
      {% endfor %}
      
      
      
      
      <script>
        
        $(document).ready(function () {
          $('#share_with_email').on('click', function () {
            var emailsInput = document.getElementById('emailIds');
            var emailsString = emailsInput.value.trim();
      
            var emails = emailsString.split(',').map(function (email) {
              return email.trim();
            });
      
            var emailRegex = /^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+$/;
      
            var invalidEmails = []
            if (emailsString == "") {
              alert('Enter valid email addresses..')
            }
            else {
              for (var i = 0; i < emails.length; i++) {
                var currentEmail = emails[i];
      
                if (currentEmail != "" && !emailRegex.test(currentEmail)) {
                  console.log(currentEmail + ' is invalid!');
                  invalidEmails.push(currentEmail)
                }
              }
      
              if (invalidEmails.length > 0) {
                alert('Invalid emails..Please check!\n' + invalidEmails)
                // alert(invalidEmails)
              } else {
                $('#share_to_email_form').submit();
              }
            }
          })
        });
      
      
        function shareOnWhatsApp() {
          var url = window.location.href;
          var text = url;
          text = encodeURIComponent(text);
          var whatsappUrl = "whatsapp://send?text=" + text;
          window.location.href = whatsappUrl;
        }
      
        function exportToPDF() {
          var content = document.getElementById('selected-area');
          html2pdf()
            .from(content)
            .save('{{sale.sales_no}}' + 'journal.pdf')
        }
        function exportToPDF2() {
          var content = document.getElementById('selected-area2');
          html2pdf()
            .from(content)
            .save('{{sale.sales_no}}' + 'journal.pdf')
        }
        function exportToPDF3() {
          var content = document.getElementById('selected-area3');
          html2pdf()
            .from(content)
            .save('{{sale.sales_no}}' + 'journal.pdf')
        }
        function exportToPDF4() {
          var content = document.getElementById('printslip');
          html2pdf()
            .from(content)
            .save('{{sale.sales_no}}' + 'journal.pdf')
        }
      
      </script>
      
      <script>
        // Get the div element by its ID
        var divElement = document.getElementById("orderinfo");
      
        // Get the height of the div using offsetHeight
        var divHeight = divElement.offsetHeight;
      
        var divElement = document.getElementById("productinfo");
      
        // Set the height of the div
        divElement.style.height = `${divHeight}px`;
      
        // Log the height to the console
      </script>
      
      <script>
        function printSelectedArea(area) {
      
          var printContents = document.getElementById("selected-area").innerHTML;
          document.getElementById("selected-area").style.backgroundColor = "white"
          var $printerDiv = $('<div class="printContainer bg-white"></div>'); // create the div that will contain the stuff to be printed
          $printerDiv.html(printContents); // add the content to be printed
          $('body').append($printerDiv).addClass("printingContent"); // add the div to body, and make the body aware of printing (we apply a set of css styles to the body to hide its contents)
      
          window.print(); // call print
          $printerDiv.remove(); // remove the div
          $('body').removeClass("printingContent");
      
        }
      
        function printSelectedArea2(area) {
      
          var printContents = document.getElementById("selected-area2").innerHTML;
          document.getElementById("selected-area2").style.backgroundColor = "white"
          var $printerDiv = $('<div class="printContainer bg-white"></div>'); // create the div that will contain the stuff to be printed
          $printerDiv.html(printContents); // add the content to be printed
          $('body').append($printerDiv).addClass("printingContent"); // add the div to body, and make the body aware of printing (we apply a set of css styles to the body to hide its contents)
      
          window.print(); // call print
          $printerDiv.remove(); // remove the div
          $('body').removeClass("printingContent");
      
        }
        function printSelectedArea3(area) {
      
          var printContents = document.getElementById("selected-area3").innerHTML;
          document.getElementById("selected-area3").style.backgroundColor = "white"
          var $printerDiv = $('<div class="printContainer bg-white"></div>'); // create the div that will contain the stuff to be printed
          $printerDiv.html(printContents); // add the content to be printed
          $('body').append($printerDiv).addClass("printingContent"); // add the div to body, and make the body aware of printing (we apply a set of css styles to the body to hide its contents)
      
          window.print(); // call print
          $printerDiv.remove(); // remove the div
          $('body').removeClass("printingContent");
      
        }
        function printSelectedArea4(area) {
      
          var printContents = document.getElementById("printslip").innerHTML;
          document.getElementById("printslip").style.backgroundColor = "white"
          var $printerDiv = $('<div class="printContainer bg-white"></div>'); // create the div that will contain the stuff to be printed
          $printerDiv.html(printContents); // add the content to be printed
          $('body').append($printerDiv).addClass("printingContent"); // add the div to body, and make the body aware of printing (we apply a set of css styles to the body to hide its contents)
      
          window.print(); // call print
          $printerDiv.remove(); // remove the div
          $('body').removeClass("printingContent");
      
        }
      </script>
      
      <script>
      
        const rows = document.querySelectorAll('.clickable');
      
        rows.forEach(row => {
          row.addEventListener('click', () => {
            var currentURL = window.location.href
            const rowId = row.id;
            var newURL = currentURL.replace(/\d+$/, rowId);
            window.location.href = newURL;
          });
        });
      
      
      
      
      
      </script>
      
      <script>
      
      
        function totemplate() {
          document.getElementById('templatediv').style.display = 'block'
          document.getElementById('overviewdiv').style.display = 'none'
          document.getElementById('templatediv2').style.display = 'none'
          document.getElementById('templatediv3').style.display = 'none'
          document.getElementById('slipdiv').style.display = 'none'
      
        }
        function totemplate2() {
          document.getElementById('templatediv').style.display = 'none'
          document.getElementById('templatediv2').style.display = 'block'
          document.getElementById('templatediv3').style.display = 'none'
          document.getElementById('overviewdiv').style.display = 'none'
          document.getElementById('slipdiv').style.display = 'none'
      
        }
        function totemplate3() {
          document.getElementById('templatediv').style.display = 'none'
          document.getElementById('templatediv2').style.display = 'none'
          document.getElementById('templatediv3').style.display = 'block'
          document.getElementById('overviewdiv').style.display = 'none'
          document.getElementById('slipdiv').style.display = 'none'
        }
        function tooverview() {
          document.getElementById('templatediv').style.display = 'none'
          document.getElementById('overviewdiv').style.display = 'block'
          document.getElementById('templatediv2').style.display = 'none'
          document.getElementById('templatediv3').style.display = 'none'
          document.getElementById('slipdiv').style.display = 'none'
        }
        function show_slip() {
          document.getElementById('templatediv').style.display = 'none'
          document.getElementById('overviewdiv').style.display = 'none'
          document.getElementById('templatediv2').style.display = 'none'
          document.getElementById('templatediv3').style.display = 'none'
          document.getElementById('slipdiv').style.display = 'block'
        }
      </script>
      
      <script>
        var $rows = $('#myTable tbody tr');
        $('#search').keyup(function () {
          var val = $.trim($(this).val()).replace(/ +/g, ' ').toLowerCase();
      
          $rows.hide().filter(function () {
            var text = $(this).text().replace(/\s+/g, ' ').toLowerCase();
            return ~text.indexOf(val);
          }).show();
        });
      
      </script>
      
      <script>
        // Function to sort the table by the selected column
        function sortTable() {
          var table, rows, switching, i, x, y, shouldSwitch;
          table = document.getElementById("myTable");
          switching = true;
      
          while (switching) {
            switching = false;
            rows = table.rows;
      
            for (i = 0; i < rows.length - 1; i++) {
              shouldSwitch = false;
              x = rows[i].getElementsByTagName("label")[0];
              y = rows[i + 1].getElementsByTagName("label")[0];
      
              if (x.innerHTML.toLowerCase() > y.innerHTML.toLowerCase()) {
                shouldSwitch = true;
                break;
              }
            }
      
            if (shouldSwitch) {
              rows[i].parentNode.insertBefore(rows[i + 1], rows[i]);
              switching = true;
            }
          }
        }
      
      
        function sortTablebybillno() {
          var table, rows, switching, i, x, y, shouldSwitch;
          table = document.getElementById("myTable");
          switching = true;
      
          while (switching) {
            switching = false;
            rows = table.rows;
      
            for (i = 0; i < rows.length - 1; i++) {
              shouldSwitch = false;
              x = rows[i].getElementsByTagName("p")[0];
              y = rows[i + 1].getElementsByTagName("p")[0];
      
              if (x.innerHTML.toLowerCase() > y.innerHTML.toLowerCase()) {
                shouldSwitch = true;
                break;
              }
            }
      
            if (shouldSwitch) {
              rows[i].parentNode.insertBefore(rows[i + 1], rows[i]);
              switching = true;
            }
          }
        }
      
      </script>
      
      <script>
        function confirmDelete() {
          var result = confirm("Are you sure you want to delete?");
          if (result) {
            // User clicked "OK," perform delete action or redirect to delete endpoint
            // You can add your delete logic or redirect here
            alert("Deleted!"); // Placeholder for your delete action
          } else {
            // User clicked "Cancel" or closed the dialog
            // Do nothing or provide feedback to the user
            alert("Cancel Delete!"); // Placeholder for feedback
          }
        }
      </script>
      
      
      
      <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
      

</body>
</html>

{% endblock %}
